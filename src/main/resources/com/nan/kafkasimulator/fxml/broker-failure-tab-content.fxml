<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      spacing="10" alignment="TOP_LEFT"
      fx:controller="com.nan.kafkasimulator.controller.BrokerFailureController"
      style="-fx-padding: 10;">

    <HBox spacing="10" alignment="CENTER_LEFT">
        <Label text="Broker Failure Simulation" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
        <Label fx:id="statusLabel" text="Not connected to Kafka cluster"/>
    </HBox>

    <HBox spacing="10" alignment="CENTER_LEFT">
        <Button fx:id="refreshButton" text="Refresh List"/>
        <Button fx:id="failRandomBrokerButton" text="Fail Random Broker"/>
        <Button fx:id="recoverAllBrokersButton" text="Recover All Brokers"/>
    </HBox>

    <TableView fx:id="brokerTableView" prefHeight="400.0" prefWidth="600.0">
        <columns>
            <TableColumn fx:id="idColumn" prefWidth="75.0" text="ID"/>
            <TableColumn fx:id="addressColumn" prefWidth="150.0" text="Address"/>
            <TableColumn fx:id="statusColumn" prefWidth="100.0" text="Status"/>
            <TableColumn fx:id="failureTimeColumn" prefWidth="180.0" text="Failure Time"/>
            <TableColumn fx:id="actionsColumn" prefWidth="150.0" text="Actions"/>
        </columns>
    </TableView>

    <TitledPane text="Instructions" expanded="false">
        <VBox spacing="5">
            <Label text="1. Use this interface to simulate broker failures and recovery in Kafka cluster"/>
            <Label text="2. Click 'Refresh List' button to update broker status information"/>
            <Label text="3. Click 'Fail Random Broker' button to randomly select a normal broker for failure simulation"/>
            <Label text="4. Click 'Recover All Brokers' button to recover all failed brokers"/>
            <Label text="5. In the table, you can individually fail and recover each broker"/>
            <Label text="6. With different acks configurations, you can observe message reliability performance in case of broker failures"/>
        </VBox>
    </TitledPane>

</VBox>
